// TODO: @sankarshanaj - set "docsLink" property
<script type="text/x-red" data-template-name="amqp-config">
</script>
<script type="text/javascript">
    registerNode({
        nodeType: 'amqp-config',
        serviceType: 'server',
        nodeDef: {
			category: 'config',
			paletteLabel: 'AMQP Broker',
            defaults: {
                name: {
                    value: '',
                    attrDef: { attrType: 'INPUT', options: { placeholder: 'Name' } }
                },
                /**
                 * The protocol to be used protocol
                 * Default value: 'amqp'
                 * TODO: Should this be added ?
                 */
                // protocol: {
                //     type: 'str',
                //     value: 'amqp'
                // },
                hostname: {
                    value: { type: 'str', value: 'localhost' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Hostname', options: {
                            types: [
                                { value: 'str', label: 'string', nullable: true, nullableValue: "localhost" },
                                { value: 'process.env', label: 'env', nullable: true, nullableValue: "localhost", validate: server.validators.typedInput('env') }
                            ]
                        }
                    }
                },
                port: {
                    value: { type: 'num', value: '5672' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Port', options: {
                            types: [
                                { value: 'num', label: 'number', nullable: true, nullableValue: 5672, validate: server.validators.typedInput('num') },
                                { value: 'process.env', label: 'env', nullable: true, nullableValue: 5672, validate: server.validators.typedInput('env') }
                            ]
                        }
                    }
                },
                username: {
                    value: { type: 'str', value: '' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Username', options: {
                            types: [
                                { label: 'string', value: 'str', validate: server.validators.typedInput('str', true) },
                                'server_env'
                            ]
                        }
                    }
                },
                password: {
                    value: { type: 'str', value: '' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Password', options: {
                            types: [
                                { label: 'string', value: 'str', validate: server.validators.typedInput('str', true) },
                                'server_env'
                            ]
                        }
                    }
                },
                frameMax: {
                    value: { type: 'num', value: '4096' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Frame Max', options: {
                            types: [
                                { value: 'num', label: 'number', nullable: true, nullableValue: 4096, validate: server.validators.typedInput('num') },
                                { value: 'process.env', label: 'env', nullable: true, nullableValue: 4096, validate: server.validators.typedInput('env') }
                            ]
                        }
                    }
                },
                heartbeat: {
                    value: { type: 'num', value: '0' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'Heartbeat', options: {
                            types: [
                                { value: 'num', label: 'number', nullable: true, nullableValue: 0, validate: server.validators.typedInput('num') },
                                { value: 'process.env', label: 'env', nullable: true, nullableValue: "0", validate: server.validators.typedInput('env') }
                            ]
                        }
                    }
                },
                vhost: {
                    value: { type: 'str', value: '/' },
                    attrDef: {
                        attrType: 'TYPED_INPUT', label: 'vHost', options: {
                            types: [
                                { value: 'str', label: 'string', nullable: true, nullableValue: "/" },
                                { value: 'process.env', label: 'env', nullable: true, nullableValue: "/", validate: server.validators.typedInput('env') }
                            ]
                        }
                    }
                }
            },
            label: function () {
                return this.name || "AMQP Config";
            },
            docsLink: 'amqp-producer-node'
        }
    });
</script>