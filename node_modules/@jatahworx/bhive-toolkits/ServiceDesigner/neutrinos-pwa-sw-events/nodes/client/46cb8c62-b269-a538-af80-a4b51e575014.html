<script
	type="text/x-red"
	data-template-name="46cb8c62-b269-a538-af80-a4b51e575014"
></script>
<script type="text/javascript">
	registerNode({
		serviceType: 'client',

		nodeType: '46cb8c62-b269-a538-af80-a4b51e575014',

		nodeDef: {
			color: '#6d0373',

			category: 'PWA SW-Events',

			docsLink: 'check-for-update',

			defaults: {
				name: { value: '' },
			},
			inputs: 1,
			outputs: 0,

			paletteLabel: 'Check For Update',

			icon:
				'neutrinos-pwa-sw-events/46cb8c62-b269-a538-af80-a4b51e575014.svg',

			label: function () {
				return this.name || 'Check For Update';
			},
			labelStyle: function () {
				return this.name ? 'node_label_italic' : '';
			},
			initdefaults: function (n, S) {
				function handleDependencies(controls, value) {
					if (controls instanceof Array) {
						for (let i = 0; i < controls.length; i++) {
							if (controls[i].action === 'required') {
								if (
									(controls[i].equal &&
										controls[i].equal.to_values.includes(
											value
										)) ||
									(controls[i].notEqual &&
										!controls[
											i
										].notEqual.to_values.includes(value))
								) {
									$('#' + controls[i].id)[controls[i].type](
										'required'
									);
									n._def.defaults[
										controls[i].property
									].required = true;
								} else {
									$('#' + controls[i].id)[controls[i].type](
										'resetRequired'
									);
									n._def.defaults[
										controls[i].property
									].required = false;
								}
							} else if (controls[i].action === 'hidden') {
								if (
									(controls[i].equal &&
										controls[i].equal.to_values.includes(
											value
										)) ||
									(controls[i].notEqual &&
										!controls[
											i
										].notEqual.to_values.includes(value))
								) {
									$('#' + controls[i].id)[controls[i].type](
										'hide'
									);
									$('#' + controls[i].id)
										.closest('.editor-form-row')
										.hide();
									S.defaults.excludeFromValidation(
										n,
										controls[i].property
									);
								} else {
									$('#' + controls[i].id)
										.closest('.editor-form-row')
										.show();
									$('#' + controls[i].id)[controls[i].type](
										'show'
									);
									S.defaults.includeForValidation(
										n,
										controls[i].property
									);
								}
								S.defaults.validateForm(true);
							}
						}
					}
				}
				return Object.assign(this, {});
			},
		},
	});
</script>
