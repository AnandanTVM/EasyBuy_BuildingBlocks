<script
	type="text/x-red"
	data-template-name="c6ef8916-35f2-a758-e8d5-8b61fdac762d"
></script>
<script type="text/javascript">
	registerNode({
		serviceType: 'client',

		nodeType: 'c6ef8916-35f2-a758-e8d5-8b61fdac762d',

		nodeDef: {
			color: '#FF4B2B',
			
			category: 'Internet',

			docsLink: 'offline-node',

			defaults: {
				name: { value: '' },
			},
			shape: 'circle',

			inputs: 0,
			outputs: 1,

			paletteLabel: 'On Offline',

			icon: 'neutrinos-internet/c6ef8916-35f2-a758-e8d5-8b61fdac762d.svg',

			label: function () {
				return this.name || 'On Offline';
			},
			labelStyle: function () {
				return this.name ? 'node_label_italic' : '';
			},
			initdefaults: function (n, S) {
				function handleDependencies(controls, value) {
					if (controls instanceof Array) {
						for (let i = 0; i < controls.length; i++) {
							if (controls[i].action === 'required') {
								if (
									(controls[i].equal &&
										controls[i].equal.to_values.includes(
											value
										)) ||
									(controls[i].notEqual &&
										!controls[
											i
										].notEqual.to_values.includes(value))
								) {
									$('#' + controls[i].id)[controls[i].type](
										'required'
									);
									n._def.defaults[
										controls[i].property
									].required = true;
								} else {
									$('#' + controls[i].id)[controls[i].type](
										'resetRequired'
									);
									n._def.defaults[
										controls[i].property
									].required = false;
								}
							} else if (controls[i].action === 'hidden') {
								if (
									(controls[i].equal &&
										controls[i].equal.to_values.includes(
											value
										)) ||
									(controls[i].notEqual &&
										!controls[
											i
										].notEqual.to_values.includes(value))
								) {
									$('#' + controls[i].id)[controls[i].type](
										'hide'
									);
									$('#' + controls[i].id)
										.closest('.editor-form-row')
										.hide();
									S.defaults.excludeFromValidation(
										n,
										controls[i].property
									);
								} else {
									$('#' + controls[i].id)
										.closest('.editor-form-row')
										.show();
									$('#' + controls[i].id)[controls[i].type](
										'show'
									);
									S.defaults.includeForValidation(
										n,
										controls[i].property
									);
								}
								S.defaults.validateForm(true);
							}
						}
					}
				}
				return Object.assign(this, {});
			},
		},
	});
</script>
