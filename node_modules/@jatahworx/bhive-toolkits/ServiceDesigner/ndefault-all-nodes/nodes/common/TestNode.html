<script type="text/x-red" data-template-name="TestNode">
    <!-- <input id="node-input-testdata"/>
    <input id="node-input-thisisthenewdefault"/>
    <input id="node-input-anothernewdefault"/>
    <input id="node-input-testinganotherone"/>
    <input id="node-input-amqpConfig"/> -->
</script>
<script type="text/javascript">
    registerNode({
        nodeType: 'TestNode',
        nodeDef: {
            color: "black",
            defaults: {
                testdata: {
                    value: 'Default test data; Changes should reflect back;',
                    attrDef: { attrType: 'INPUT', options: { placeholder: 'testdata' } }
                },
                thisisthenewdefault: {
                    value: 'test you',
                    attrDef: { attrType: 'INPUT', options: { placeholder: 'thisisthenewdefault' } }
                },
                anothernewdefault: {
                    value: 'another test you',
                    attrDef: { attrType: 'INPUT', options: { placeholder: 'anothernewdefault' } }
                },
                testinganotherone: {
                    value: 'testinganotherone',
                    attrDef: { attrType: 'INPUT', options: { placeholder: 'testinganotherone' } }
                },
                amqpConfig: {
                    type: 'amqp-config', value: {}, required: true, options: {},
                    attrDef: { attrType: 'SELECT', label: 'AMQP Config' }
                },
                checkbox: {
                    value: false,
                    attrDef: {attrType: 'TOGGLE_BUTTON', options: {label: 'A togglebutton'}}
                }
            },
            inputs: 1,
            outputs: 1,
            icon: "ndefault-all-nodes/start-node.svg",
            label: function () {
                return this.name;
            },
            labelStyle: function () {
                // Makes the label color Red
                return "node_label_unknown";
            },
            initdefaults: function (n, SRD) {
                let defaults = this;
                // creating a test function that populates defaults
                function dynamicallyPopulateDefaults() {
                    let defaultsList = [
                        'name',
                        'username',
                        'password',
                        'firstName',
                        'lastName'
                    ];

                    for (let i = 0; i < defaultsList.length; i++) {
                        defaults[defaultsList[i]] = {
                            value: defaultsList[i],
                            attrDef: { attrType: 'INPUT', options: { placeholder: defaultsList[i] } }
                        }
                    }
                }
                dynamicallyPopulateDefaults();
                return defaults;

            }
            // oneditinit: function (SRD) {
            //     let node = this;
            //     console.log(node);
            //     let __$ = $('#dialog-form');
            //     let defaultsList = [
            //         'name',
            //         'username',
            //         'password',
            //         'firstName',
            //         'lastName'
            //     ];
            //     $('#node-input-amqpConfig').selectField();

            // for (let i = 0; i < defaultsList.length; i++) {
            //     __$.append(`<input id="node-input-${defaultsList[i]}"/>`);
            //     $('#node-input-' + defaultsList[i]).inputField({
            //         placeholder: defaultsList[i],
            //         value: node[defaultsList[i]] || defaultsList[i]
            //     })
            // }

            // },
            // oneditprepare: function (SRD) {
            //     let node = this;
            // }
        }
    });
</script>