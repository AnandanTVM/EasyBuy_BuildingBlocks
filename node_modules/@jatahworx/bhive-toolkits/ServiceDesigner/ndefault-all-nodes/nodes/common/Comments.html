<script type="text/x-red" data-template-name="Comments">
	<div class="editor-form-row">
		<input type="text" id="node-input-name" placeholder="[n-sd]common.label.name">
	</div>
	<div class="editor-form-row-margin-bottom-1">
		<label for="node-input-comments"></i> <span data-i18n="common.label.commentsEditor"></span></label>
		<input type="hidden" id="node-input-comments" autofocus="autofocus">
	</div>
	<div class="form-row node-text-editor-row" style="position:relative">
		<div style="height: inherit; min-height:150px;" class="node-text-editor" id="node-input-comments-editor" ></div>
	</div>
</script>

<script type="text/javascript">
    registerNode({
        nodeType: 'Comments',
        nodeDef: {
            color: "#e21954",
			category: 'General',
			isClassFunction: false,
            defaults: {
                name : { value: '' },
                comments: { value: '' }
            },
            inputs: 0,
            outputs: 0,
            icon: "ndefault-all-nodes/comments-node.svg",
            label: function() {
                return this.name || 'Comments'
            },
            oneditprepare: function(SRD) {
				let node = this;
				$('#dialog-form #node-input-name').inputField();
                SRD.editor.createEditor({
                    id: 'node-input-comments-editor',
                    value: $("#node-input-comments").val(),
                }).then(e => {
                    this.editor = e;
                }).catch(err => {
                    SRD.dialogService.openSnackBar("Failed to open the comments editor");
                });
            },
            oneditsave: function() {
                $("#node-input-comments").val(this.editor.getData());
                this.editor = null;
            },
            oneditcancel: function() {
                this.editor = null;
            },
            docsLink: 'comments-node'
        },
       
    });
</script>
